import uuidv5 from 'uuid/v5';
import { range } from 'rxjs';
import { combineAll, map } from 'rxjs/operators';
import moment from 'moment';
import { addMalware, deleteMalware } from '../src/domain/malware';

module.exports.up = async next => {
  console.log('Starting')
  range(0, 1000)
    .pipe(
      map(val => {
        const malwareId = uuidv5(val.toString(), uuidv5.URL);
        return addMalware({
          id: `malware--${malwareId}`,
          created: moment().toISOString(),
          labels: [
            Math.random()
              .toString(36)
              .substring(7)
          ],
          name: `malware-${malwareId}-${Math.random()
            .toString(36)
            .substring(7)}`,
          description: `malware-${Math.random()
            .toString(36)
            .substring(15)}`
        });
      })
    )
    .pipe(combineAll())
    .subscribe(val => console.log(val), next());
};

module.exports.down = async next => {};
